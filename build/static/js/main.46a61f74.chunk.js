(this.webpackJsonpguiatelefonica=this.webpackJsonpguiatelefonica||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(2),a=t.n(r),c=t(14),o=t.n(c),i=t(3),u=t(0),s=function(e){var n=e.person,t=e.handlerDelete;return Object(u.jsxs)("li",{children:[n.name," ",n.number," ",Object(u.jsx)("button",{id:n.id,name:n.name,onClick:t,children:"Delete"})," "]})},l=function(e){var n=e.persons,t=e.handlerDelete;return Object(u.jsx)("ul",{children:n.map((function(e){return Object(u.jsx)(s,{person:e,handlerDelete:t},e.id)}))})},d=function(e){var n=e.addPerson,t=e.newName,r=e.newNumber,a=e.handleNewName,c=e.handleNewNumber;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:a})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:r,onChange:c})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var n=e.persons,t=e.filterName,r=e.setFindFilterName;return console.log(n),Object(u.jsxs)("div",{children:["filter show with:",Object(u.jsx)("input",{value:t,onChange:r})]})},j=t(4),b=t.n(j),m="/api/persons",h=function(){return b.a.get(m).then((function(e){return e.data}))},p=function(e){return b.a.post(m,e).then((function(e){return e.data}))},O=function(e){return b.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},v=function(e,n){return b.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){var n=e.message,t=e.typeMessage;if(null===n)return null;var r="message ".concat(t);return Object(u.jsx)("div",{className:r,children:n})},g=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),o=Object(i.a)(c,2),s=o[0],j=o[1],b=Object(r.useState)(""),m=Object(i.a)(b,2),g=m[0],w=m[1],N=Object(r.useState)(""),P=Object(i.a)(N,2),y=P[0],C=P[1],D=Object(r.useState)(null),S=Object(i.a)(D,2),k=S[0],F=S[1],T=Object(r.useState)("exito"),U=Object(i.a)(T,2),M=U[0],E=U[1];Object(r.useEffect)((function(){h().then((function(e){a(e)}))}),[]),console.log("render",t.length,"persons");var J=""===y?t:t.filter((function(e){return-1!==e.name.toUpperCase().indexOf(y.toUpperCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(x,{message:k,typeMessage:M}),Object(u.jsx)(f,{persons:J,filterName:y,setFindFilterName:function(e){C(e.target.value)}}),Object(u.jsx)("h2",{children:"Add a New"}),Object(u.jsx)(d,{persons:J,addPerson:function(e){e.preventDefault();var n={name:s,number:g},r=t.find((function(e){return e.name.trim().toUpperCase()===s.trim().toUpperCase()}));if(console.log("filtrado",r),r){if(!window.confirm("".concat(e.target.name," is already added to phonebook, replace the old number with a new number")))return j(""),void w("");v(r.id,n).then((function(e){console.log("nuevo",n),a(t.map((function(e){return r.id===e.id?n:e}))),F("Person '".concat(n.name,"' was updated.")),setTimeout((function(){F(null)}),5e3),j(""),w("")})).catch((function(e){E("error"),console.log("the Person '".concat(n.name,"'  was already deleted from server.")),F("the Person '".concat(n.name,"'  was already deleted from server.")),setTimeout((function(){F(null)}),5e3)}))}else p(n).then((function(e){F("Person '".concat(n.name,"' was created.")),E("exito"),setTimeout((function(){F(null)}),5e3),a(t.concat(e)),j(""),w("")}))},newName:s,newNumber:g,handleNewName:function(e){!function(e){j(e.target.value)}(e)},handleNewNumber:function(e){!function(e){w(e.target.value)}(e)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(l,{persons:J,handlerDelete:function(e){e.preventDefault(),window.confirm("Delete ".concat(e.target.name))&&O(e.target.id).then((function(n){console.log("entre",t);var r=t.filter((function(n){return n.id!==e.target.id}));a(r),E("exito"),F("the Person '".concat(e.target.name,"' was deleted.")),setTimeout((function(){F(null)}),5e3)})).catch((function(e){E("error"),F("the Person  was already deleted from server.")}))}})]})};t(38);o.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(g,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.46a61f74.chunk.js.map